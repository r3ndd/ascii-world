<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started - ASCII World Engine</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-twilight.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <style>
        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f3460;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --accent: #e94560;
            --accent-hover: #ff6b6b;
            --code-bg: #0d1117;
            --border: #30363d;
            --success: #238636;
            --warning: #f0883e;
            --info: #58a6ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: var(--bg-secondary);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 20px 0;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .sidebar-header h1 {
            font-size: 1.4rem;
            color: var(--accent);
            margin-bottom: 5px;
        }

        .sidebar-header .version {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .nav-section {
            margin-bottom: 15px;
        }

        .nav-section-title {
            padding: 10px 20px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .nav-link {
            display: block;
            padding: 8px 20px;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            background-color: var(--bg-tertiary);
            color: var(--accent-hover);
        }

        .nav-link.active {
            background-color: var(--bg-tertiary);
            border-left: 3px solid var(--accent);
        }

        .content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            max-width: 900px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.8rem;
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.4rem;
            margin: 30px 0 15px;
            color: var(--accent);
        }

        h4 {
            font-size: 1.1rem;
            margin: 25px 0 10px;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        a {
            color: var(--info);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        pre {
            background-color: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }

        code {
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9rem;
            color: #e6edf3;
        }

        code.inline {
            background-color: var(--code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background-color: var(--bg-tertiary);
            font-weight: 600;
            color: var(--accent);
        }

        tr:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert-info {
            background-color: rgba(88, 166, 255, 0.1);
            border-color: var(--info);
        }

        .alert-warning {
            background-color: rgba(240, 136, 62, 0.1);
            border-color: var(--warning);
        }

        .alert-success {
            background-color: rgba(35, 134, 54, 0.1);
            border-color: var(--success);
        }

        .step {
            margin: 30px 0;
            padding: 25px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            border-left: 4px solid var(--accent);
        }

        .step-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background-color: var(--accent);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .step-title {
            font-size: 1.3rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Page TOC - Right side navigation */
        .page-toc {
            position: fixed;
            right: 20px;
            top: 100px;
            width: 220px;
            max-height: calc(100vh - 140px);
            overflow-y: auto;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            z-index: 100;
        }

        .page-toc h3 {
            margin: 0 0 12px 0;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .page-toc ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .page-toc li {
            margin: 0;
        }

        .page-toc a {
            display: block;
            padding: 6px 0;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.85rem;
            border-left: 2px solid transparent;
            padding-left: 10px;
            margin-left: -12px;
            transition: all 0.2s ease;
        }

        .page-toc a:hover {
            color: var(--accent-hover);
            border-left-color: var(--accent);
        }

        .page-toc a.active {
            color: var(--accent);
            border-left-color: var(--accent);
            font-weight: 600;
        }

        @media (max-width: 1400px) {
            .page-toc {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
                border-right: none;
                border-bottom: 1px solid var(--border);
            }

            .content {
                margin-left: 0;
                padding: 20px;
            }

            .container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <h1>ASCII World</h1>
                <div class="version">v0.1.0</div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Getting Started</div>
                <a href="index.html" class="nav-link">Overview</a>
                <a href="getting-started.html" class="nav-link active">Quick Start</a>
                <a href="examples.html" class="nav-link">Examples</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">API Reference</div>
                <a href="core.html" class="nav-link">Core</a>
                <a href="ecs.html" class="nav-link">ECS</a>
                <a href="display.html" class="nav-link">Display</a>
                <a href="world.html" class="nav-link">World</a>
                <a href="time.html" class="nav-link">Time</a>
                <a href="physics.html" class="nav-link">Physics</a>
                <a href="items.html" class="nav-link">Items</a>
                <a href="content.html" class="nav-link">Content</a>
                <a href="config.html" class="nav-link">Configuration</a>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Guides</div>
                <a href="modding-guide.html" class="nav-link">Modding Guide</a>
            </div>
        </nav>

        <main class="content">
            <h1>Getting Started</h1>

            <p>
                This guide will walk you through setting up ASCII World Engine and creating your first game.
                By the end, you'll have a basic roguelike running in your browser.
            </p>

            <div class="alert alert-info">
                <strong>Prerequisites:</strong> You'll need Node.js 18+ installed on your system.
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div class="step-title">Installation</div>
                </div>
                <p>Build from the source repository:</p>
                <pre><code class="language-typescript">git clone https://github.com/r3ndd/ascii-world.git
cd ascii-world
npm install
npm run build</code></pre>
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div class="step-title">Link the Engine to Your Project</div>
                </div>
                <p>Since you're using the engine locally, you need to link it to your game project. Choose one of these methods:</p>
                
                <h4>Option A: npm link (Recommended for development)</h4>
                <pre><code class="language-typescript"># In the ascii-world directory (run once):
npm link

# In your new game project directory:
npm link ascii-world</code></pre>
                
                <h4>Option B: Install from local path</h4>
                <pre><code class="language-typescript"># In your new game project directory:
npm install /path/to/ascii-world</code></pre>
                
                <div class="alert alert-warning">
                    <strong>Important:</strong> The <code>dist/</code> directory must exist with built files. Make sure you've run <code>npm run build</code> in the ascii-world directory first.
                </div>
                
                <p>npm will automatically resolve the entry point from <code>package.json</code> (which points to <code>dist/index.js</code>), so you only need to reference the root ascii-world directory.</p>
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <div class="step-title">Project Setup</div>
                </div>
                <p>Create your project structure:</p>
                <pre><code class="language-typescript">my-game/
├── src/
│   └── main.ts
├── index.html
├── package.json
└── tsconfig.json</code></pre>

                <p>Configure your <code>tsconfig.json</code>:</p>
                <pre><code class="language-json">{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "moduleResolution": "node",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"]
}</code></pre>
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <div class="step-title">Your First Game</div>
                </div>
                <p>Create <code>src/main.ts</code> with this minimal game:</p>
                <pre><code class="language-typescript">import {
    Engine,
    ECSWorld,
    World,
    DisplayManager,
    Camera,
    Renderer,
    TurnManager,
    SpeedSystem,
    PhysicsSystem,
    FOVSystem,
    globalEventBus,
    createPosition,
    createHealth,
    createSpeed,
    createActor,
    createRenderable,
    createInventoryComponent
} from 'ascii-world';

async function init() {
    // Initialize engine
    const engine = new Engine();
    await engine.initialize();

    // Create ECS world
    const ecsWorld = new ECSWorld();

    // Setup display (80x25 tiles)
    const display = new DisplayManager({
        width: 80,
        height: 25,
        fontSize: 16,
        fontFamily: 'monospace',
        fg: '#cccccc',
        bg: '#000000',
        forceSquareRatio: true
    });

    // Add display to DOM
    const container = display.getContainer();
    if (container) {
        document.body.appendChild(container);
    }

    // Create camera and renderer
    const camera = new Camera(
        { width: 80, height: 25 },
        { width: 1000, height: 1000 }
    );
    const renderer = new Renderer(display, camera);

    // Create game world
    const gameWorld = new World(1000, 1000, 64, ecsWorld);
    gameWorld.initialize();

    // Create player entity
    const player = ecsWorld.createEntity()
        .addComponent(createPosition(500, 500))
        .addComponent(createHealth(100, 100))
        .addComponent(createSpeed(100))
        .addComponent(createActor(true))  // true = is player
        .addComponent(createRenderable('@', '#ffffff'))
        .addComponent(createInventoryComponent(50, 30));

    // Setup camera to follow player
    const playerPos = player.getComponent('position') as { x: number; y: number };
    camera.setPosition(playerPos.x, playerPos.y);

    // Initialize turn manager
    const turnManager = new TurnManager(ecsWorld, globalEventBus, new SpeedSystem());

    // Handle player input
    const handleInput = async () => {
        return new Promise<void>((resolve) => {
            const onKeyDown = (e: KeyboardEvent) => {
                const physics = new PhysicsSystem(gameWorld, ecsWorld, globalEventBus);

                switch(e.key) {
                    case 'ArrowUp':
                    case 'w':
                        physics.moveEntity(player, 'north');
                        break;
                    case 'ArrowDown':
                    case 's':
                        physics.moveEntity(player, 'south');
                        break;
                    case 'ArrowLeft':
                    case 'a':
                        physics.moveEntity(player, 'west');
                        break;
                    case 'ArrowRight':
                    case 'd':
                        physics.moveEntity(player, 'east');
                        break;
                }

                // Update camera to follow player
                const pos = player.getComponent('position') as { x: number; y: number };
                camera.setPosition(pos.x, pos.y);

                document.removeEventListener('keydown', onKeyDown);
                resolve();
            };

            document.addEventListener('keydown', onKeyDown);
        });
    };

    // Set player action callback
    turnManager.setPlayerActionCallback(handleInput);

    // Game loop
    const gameLoop = () => {
        // Render visible tiles
        const fov = new FOVSystem(gameWorld);
        const pos = player.getComponent('position') as { x: number; y: number };
        fov.computeFOV(pos.x, pos.y, 10);

        // Render world
        renderer.render();

        requestAnimationFrame(gameLoop);
    };

    // Start the game
    engine.start();
    turnManager.start();
    gameLoop();
}

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', init);</code></pre>
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">5</div>
                    <div class="step-title">HTML Setup</div>
                </div>
                <p>Create <code>index.html</code>:</p>
                <pre><code class="language-typescript">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title>My ASCII Game&lt;/title&gt;
    &lt;style&gt;
        body {
            margin: 0;
            padding: 20px;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        canvas {
            border: 2px solid #333;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script src="./dist/main.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            </div>

            <div class="step">
                <div class="step-header">
                    <div class="step-number">6</div>
                    <div class="step-title">Build and Run</div>
                </div>
                <p>Build your project:</p>
                <pre><code class="language-typescript">npm run build</code></pre>
                <p>Or use a bundler like Vite for development:</p>
                <pre><code class="language-typescript">npx vite</code></pre>
                <p>Open your browser and navigate to the development server. You should see your game running with:</p>
                <ul>
                    <li>A black background with ASCII tiles</li>
                    <li>Your player character (@) in the center</li>
                    <li>Ability to move with arrow keys or WASD</li>
                    <li>Camera following the player</li>
                </ul>
            </div>

            <h2>Next Steps</h2>

            <p>Now that you have a basic game running, you can:</p>

            <ul>
                <li>Add <a href="items.html">items and inventory</a> to your game</li>
                <li>Implement <a href="content.html">world generation</a> with different biomes</li>
                <li>Create <a href="modding-guide.html">mods and content packs</a></li>
                <li>Add <a href="physics.html">lighting and field of view</a> effects</li>
                <li>Explore the <a href="examples.html">examples</a> for common patterns</li>
            </ul>

            <div class="alert alert-success">
                <strong>Congratulations!</strong> You've created your first ASCII World game.
                The engine is now ready for you to expand with features like combat, crafting, and more.
            </div>

            <div class="footer">
                <p>ASCII World Engine v0.1.0 | Built with rot.js</p>
            </div>

            <nav class="page-toc">
                <h3>On This Page</h3>
                <ul id="toc-list"></ul>
            </nav>
        </main>
    </div>

    <script>
        (function() {
            const h2s = document.querySelectorAll('main.content h2');
            const tocList = document.getElementById('toc-list');

            h2s.forEach((h2, index) => {
                const id = h2.textContent.toLowerCase().replace(/[^\w]+/g, '-').replace(/^-|-$/g, '') || 'section-' + index;
                h2.id = id;

                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = '#' + id;
                a.textContent = h2.textContent;
                li.appendChild(a);
                tocList.appendChild(li);
            });

            const tocLinks = document.querySelectorAll('.page-toc a');
            const sections = Array.from(h2s);

            function updateActiveToc() {
                const scrollPos = window.scrollY + 150;

                sections.forEach((section, index) => {
                    const sectionTop = section.offsetTop;
                    const sectionBottom = sectionTop + section.offsetHeight;

                    if (scrollPos >= sectionTop && scrollPos < sectionBottom) {
                        tocLinks.forEach(link => link.classList.remove('active'));
                        if (tocLinks[index]) tocLinks[index].classList.add('active');
                    }
                });
            }

            window.addEventListener('scroll', updateActiveToc);
            updateActiveToc();
        })();
    </script>
</body>
</html>